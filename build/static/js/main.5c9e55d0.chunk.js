(this["webpackJsonpfront-gwith"]=this["webpackJsonpfront-gwith"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=(a(44),a(3)),s=a(1),i=a(5),u=a(37),m=a.n(u),d=(a(50),a(51),a(52),a(6)),f=[{order:1,name:"accueil",route:"/"},{order:2,name:"cr\xe9er",route:"/create"},{order:3,name:"jouer",route:"/gamelist"},{order:4,name:"\xe0 propos",route:"/about"},{order:5,name:"contact",route:"/contact"}],p=function(e,t){return e?[{name:"mon profil",path:"/profile/".concat(t)},{name:"deconnexion",path:"/logout"}]:[{name:"connexion",path:"/login"},{name:"inscription",path:"/signup"}]},g=function(e){var t=e.isLogged,a=e.connectedId,c=Object(n.useState)(!1),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(!1),m=Object(s.a)(u,2),g=m[0],b=m[1],h=p(t,a),E=!1===l?"hamburger hamburger--collapse":"hamburger hamburger--collapse is-active",y=!1===l?"opacity-0":"opacity-100 nav__list--active",x=!1===g?"opacity-0":"opacity-100 nav__list-user--active";return r.a.createElement("div",{className:"nav bg-gray-900 shadow-lg  h-auto relative py-2"},r.a.createElement("div",{className:"flex pl-5 pr-12 justify-between items-center"},r.a.createElement("button",{onClick:function(){g?(b(!1),setTimeout((function(){i(!l)}),500)):i(!l)},className:"".concat(E),type:"button"},r.a.createElement("span",{className:"hamburger-box"},r.a.createElement("span",{className:"hamburger-inner"}))),r.a.createElement("div",{onClick:function(){l?(i(!1),setTimeout((function(){b(!g)}),500)):b(!g)},className:"nav__user h-20 w-20 rounded-full bg-contain bg-center transform cursor-pointer hover:scale-110 sm:hidden"})),r.a.createElement("ul",{className:"nav__list overflow-hidden ".concat(y," sm:static sm:opacity-100 sm:h-auto uppercase text-center sm:py-5 text-gray-100 text-xl flex flex-col sm:flex-row justify-around sm:items-center font-bold md:justify-around")},f.map((function(e,t){return r.a.createElement(d.c,{key:t,activeClassName:"nav__selected",to:e.route,exact:!0,className:"order-".concat(e.order," ").concat("/"===e.route?"md:hidden":""," p-3 duration-150 ease-in-out sm:p-5 hover:text-gray-700 md:w-48 md:mx-2")},e.name)})),r.a.createElement(d.c,{to:"/",className:"md:order-".concat(Math.ceil(f.length/2))},r.a.createElement("img",{src:"/assets/img/logo.png",className:"nav__logo absolute h-64 hidden md:block mx-auto",alt:""}))),r.a.createElement("ul",{className:"nav__list-user ".concat(x," overflow-hidden uppercase text-center text-gray-100 text-xl flex flex-col justify-around font-bold sm:hidden")},h.map((function(e,t){return r.a.createElement(d.c,{key:t,activeClassName:"nav__selected",className:"p-3 sm:p-5",to:e.path},e.name)}))))},b=Object(l.b)((function(e){return{isLogged:e.auth.isLogged,connectedId:e.auth.connectedId}}),{})(g),h=(a(54),a(55),function(e){e.id,e.author,e.category,e.difficulty,e.pictureFile,e.rating,e.title,e.handleModal}),E=(a(56),function(e){var t=e.isLogged,a=e.connectedId,n=p(t,a);return r.a.createElement("div",{className:"user-panel h-24 w-full bg-gray-900 text-white flex items-center justify-between rounded-l-full md:flex-col md:rounded-lg md:relative md:justify-center md:text-center"},r.a.createElement("div",{className:"user-panel__img h-24 w-24 rounded-full shadow-lg bg-contain bg-center md:absolute md:h-48 md:w-48 md:bg-cover"}),r.a.createElement("p",{className:"user-panel__content w-48 ml-4 mr-auto text-xl font-bold md:mt-16 md:mr-0 md:ml-0 md:mb-6"},"Bienvenue, ",r.a.createElement("br",null)," jeune aventurier."),r.a.createElement("div",{className:"user-panel__buttons mr-auto text-xl md:mr-0 md:mt-2 md:flex md:flex-col xl:flex-row xl:justify-evenly xl:w-full xl:h-16 "},n.map((function(e,t){return r.a.createElement(d.b,{to:e.path,key:t},r.a.createElement("button",{type:"button",className:"bg-white ease-in-out duration-75 hover:bg-blue-900 hover:text-white text-gray-900 font-bold py-2 px-4 sm:px-2 rounded mx-2 md:mx-0 md:mb-2 xl:mb-0 xl:px-8 capitalize"},e.name))}))))}),y=Object(l.b)((function(e){return{isLogged:e.auth.isLogged,connectedId:e.auth.connectedId}}),{})(E),x=a(2),v=a.n(x),_=a(38),w=a.n(_),N=(a(93),a(94),function(e){var t=e.type,a=e.color,n=e.heightValue,c=e.widthValue;return r.a.createElement("div",{className:"loader"},r.a.createElement(w.a,{type:t,color:a,height:n,width:c}))}),j=(a(95),function(e){var t=e.showModal,a=e.onClose,c=e.storyId,o=!0===t?"block":"hidden",l=Object(n.useState)(!0),i=Object(s.a)(l,2),u=i[0],m=i[1],f=Object(n.useState)([]),p=Object(s.a)(f,2),g=p[0],b=p[1],h=Object(n.useState)([]),E=Object(s.a)(h,2),y=(E[0],E[1]),x=Object(n.useRef)(null);Object(n.useEffect)((function(){return document.addEventListener("click",_),document.addEventListener("keyup",w),j(),function(){document.removeEventListener("click",_),document.removeEventListener("keyup",w)}}),[]);var _=function(e){x.current&&!x.current.contains(e.target)&&a()},w=function(e){"Escape"===e.code&&a()},j=function(){v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/stories/".concat(c)).then((function(e){b(e.data),m(!1)})).catch((function(e){y("Erreur au chargement de l'histoire. Veuillez r\xe9essayer")}))};return r.a.createElement("div",{className:"modal h-screen w-screen ".concat(o," fixed z-40 flex justify-center items-center")},r.a.createElement("div",{className:"modal__container w-3/4 mx-auto md:max-w-6xl relative bg-gray-300 opacity-100 rounded-md flex justify-center items-center ".concat(u?"h-64":""),ref:x},u&&r.a.createElement(N,{type:"Oval",color:"#5054B1",heightValue:50,widthValue:50}),!u&&r.a.createElement("div",{className:"modal__story h-full w-full md:flex md:flex-col"},r.a.createElement("div",{className:"modal__content m-2 p-4 shadow-2xl bg-gray-300 h-full"},r.a.createElement("h1",{className:"modal__title font-bold text-2xl text-center"},g.title),r.a.createElement("p",{className:"modal__author text-center text-md my-2 text-gray-700"},g.author.name),r.a.createElement("p",{className:"modal__category text-center text-sm my-2"},g.category.name),r.a.createElement("p",{className:"modal__synopsis text-justify"},g.synopsis)),r.a.createElement("div",{className:"modal__buttons flex justify-around w-full"},r.a.createElement(d.b,{to:"/letsplay/".concat(g.id)},r.a.createElement("button",{className:"modal__play w-24 my-2 py-4 bg-green-400 rounded-lg font-bold text-white sm:w-48 md:w-64"},"Jouer")),r.a.createElement("button",{className:"modal__close w-24 py-4 my-2 bg-red-500 rounded-lg font-bold text-white sm:w-48 md:w-64",type:"button",onClick:function(){return a()}},"Fermer")))))}),O=function(e){var t=e.popularStories,a=e.fetchPopularStories,c=e.latestStories,o=e.fetchLatestStories;Object(n.useEffect)((function(){a(),o()}),[a,o]),Object(n.useEffect)((function(){t.length>0&&m(!1)}),[t]),Object(n.useEffect)((function(){c.length>0&&g(!1)}),[c]);var l=Object(n.useState)(!0),i=Object(s.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(!0),f=Object(s.a)(d,2),p=f[0],g=f[1],b=Object(n.useState)(!1),E=Object(s.a)(b,2),x=E[0],v=E[1],_=Object(n.useState)(null),w=Object(s.a)(_,2),O=w[0],S=w[1],I=function(e){S(e),v(!0)};return r.a.createElement("div",{className:"home md:mt-32 mx-8 md:flex md:mt-16 md:justify-around"},x&&r.a.createElement(j,{showModal:x,onClose:function(){return v(!1)},storyId:O}),r.a.createElement("section",{className:"home__user home__user--desktop hidden mt-8 sm:block md:block md:order-1 md:w-1/3"},r.a.createElement(y,null)),r.a.createElement("section",{className:"home__stories mt-16 sm:my-8 md:w-2/3 md:my-0 md:mr-12"},r.a.createElement("section",{className:"home__popular mb-12 mt-4"},r.a.createElement("h1",{className:"home__title uppercase text-white text-4xl font-light "},"Populaires"),u?r.a.createElement("div",{className:"home__loading-popular flex justify-center mt-4"},r.a.createElement(N,{type:"Bars",color:"#5BC1FF",heightValue:50,widthValue:50})):r.a.createElement("ul",{className:"home__list-popular"},t.map((function(e){return r.a.createElement(h,Object.assign({key:e.id},e,{handleModal:I}))})))),r.a.createElement("section",{className:"home__latest"},r.a.createElement("h1",{className:"home__title uppercase text-white text-3xl font-bold"},"Nouveaut\xe9s"),p?r.a.createElement("div",{className:"home__loading-latest flex justify-center mt-4"},r.a.createElement(N,{type:"Bars",color:"#5BC1FF",heightValue:50,widthValue:50})):r.a.createElement("ul",{className:"home__list-latest pb-4"},c.map((function(e){return r.a.createElement(h,Object.assign({key:e.id},e,{handleModal:I}))}))))))},S=Object(l.b)((function(e){return{popularStories:e.home.listPopular,latestStories:e.home.listLatest}}),(function(e){return{fetchPopularStories:function(){e({type:"FETCH_POPULAR_STORIES"})},fetchLatestStories:function(){e({type:"FETCH_LATEST_STORIES"})}}}))(O),I=(a(96),a(97),function(e){var t=e.type,a=e.name,c=e.placeholder,o=e.inputValue,l=e.setInputValue,s=e.clearInput;return Object(n.useEffect)(s,[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"field__input px-4 mb-2 h-12",id:a,type:t,name:a,placeholder:c,value:o,onChange:function(e){return l(e.target.value)}}))}),C=function(e){return{type:"SAVE_USER",username:e.username,id:e.id}},L=Object(l.b)((function(e,t){return{inputValue:e.auth[t.name]}}),(function(e,t){return{setInputValue:function(a){e(function(e,t){return{type:"CHANGE_INPUT",value:e,key:t}}(a,t.name))},clearInput:function(){e({type:"CLEAR_INPUT",key:t.name})}}}))(I),k=function(e){var t=e.handleLogin,a=e.isLogged;return r.a.createElement("div",{className:"h-screen"},r.a.createElement("div",{className:"login-form mt-8 md:flex"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t()},className:"login-form__panel w-64 flex flex-col justify-center mx-auto p-4 border-2 border-orange-400 bg-orange-900 font-bold"},r.a.createElement("h1",{className:"login-form__title text-xl font-bold text-center text-orange-400"},"Prouvez que vous n'\xeates pas n'importe quel guerrier."),r.a.createElement("label",{className:"login-form__label mt-4 mb-2 text-orange-400",htmlFor:"username"},"Nom d'utilisateur"),r.a.createElement(L,{type:"username",name:"username",placeholder:"Nom d'utilisateur"}),r.a.createElement("label",{className:"login-form my-2 text-orange-400",htmlFor:"password"},"Mot de passe"),r.a.createElement(L,{type:"password",name:"password",placeholder:"Mot de passe"}),r.a.createElement("input",{className:"login-form__submit cursor-pointer h-32 p-6 mt-8 uppercase font-bold whitespace-pre-wrap border-4 border-double border-yellow-400 bg-orange-600 rounded-sm shadow-inner",type:"submit",value:"Entrer dans la l\xe9gende"})),r.a.createElement("section",{className:"login-form__noaccount w-64 h-32 flex flex-col justify-center mx-auto p-4 border-2 border-orange-400 bg-orange-900 font-bold mt-4"},r.a.createElement("p",{className:"login-form__signup text-center"},"Pas encore de compte ?"),r.a.createElement(d.b,{to:"/signup",className:"mx-auto"},r.a.createElement("button",{type:"button",className:"login-form__btn-signup cursor-pointer h-12 px-6 mt-2 uppercase font-bold whitespace-pre-wrap border-4 border-double border-yellow-400 bg-orange-600 rounded-sm shadow-inner"},"Cr\xe9er un compte")))),a&&r.a.createElement(i.a,{to:"/"}))},A=Object(l.b)((function(e){return{isLogged:e.auth.isLogged}}),(function(e){return{handleLogin:function(){e({type:"LOGIN"})}}}))(k),T=(a(98),function(e){var t=e.username,a=e.email,c=e.password,o=e.passwordCheck,l=e.handleSignup,u=function(e,t,a,n){var r={};return""===e?r.usernameErrors=["Le nom d'utilisateur ne peut-\xeatre vide"]:e.length<2&&(r.usernameErrors=["Le nom d'utilisateur doit contenir 2 caract\xe8res minimum"]),""===t&&(r.emailErrors=["L'email ne peut \xeatre vide"]),""===n&&(r.passwordCheckErrors=["La confirmation du mot de passe ne peut \xeatre vide"]),""===a?r.passwordErrors=["Le mot de passe ne peut \xeatre vide"]:a.length<6?r.passwordErrors=["Le mot de passe doit contenir 6 caract\xe8res minimum"]:a!==n&&""!==n&&(r.passwordErrors=["Les mots de passes ne sont pas identiques"]),r}(t,a,c,o),m=Object(n.useState)(!1),d=Object(s.a)(m,2),f=d[0],p=d[1];return r.a.createElement("div",{className:"signup-form mt-8"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(u),0===Object.keys(u).length&&(l(),p(!0))},className:"signup-form__panel w-64 flex flex-col justify-center mx-auto p-4 border-2 border-orange-400 bg-orange-900 font-bold"},r.a.createElement("h1",{className:"signup-form__title text-xl font-bold text-center text-orange-400"},"Inscription"),r.a.createElement("label",{className:"signup-form__label mt-4 mb-2 text-orange-400",htmlFor:"username"},"* Nom d'utilisateur"),r.a.createElement(L,{type:"text",name:"username",placeholder:"Nom d'utilisateur"}),r.a.createElement("label",{className:"signup-form__label mt-4 mb-2 text-orange-400",htmlFor:"email"},"* Email"),r.a.createElement(L,{type:"email",name:"email",placeholder:"Email"}),r.a.createElement("label",{className:"signup-form my-2 text-orange-400",htmlFor:"password"},"* Mot de passe"),r.a.createElement(L,{type:"password",name:"password",placeholder:"Mot de passe"}),r.a.createElement("label",{className:"signup-form my-2 text-orange-400",htmlFor:"password-check"},"* Confirmez votre mot de passe"),r.a.createElement(L,{type:"password",name:"passwordCheck",placeholder:"Confirmation mot de passe"}),r.a.createElement("p",{className:"signup-form__info italic text-xs mt-1"},"* Informations obligatoires"),r.a.createElement("input",{className:"signup-form__submit cursor-pointer h-32 p-6 mt-8 uppercase font-bold whitespace-pre-wrap border-4 border-double border-yellow-400 bg-orange-600 rounded-sm shadow-inner",type:"submit",value:"Confirmer l'inscription"})),f&&r.a.createElement(i.a,{to:"/"}))}),R=Object(l.b)((function(e){return{username:e.auth.username,email:e.auth.email,password:e.auth.password,passwordCheck:e.auth.passwordCheck}}),(function(e){return{handleSignup:function(){e({type:"SIGNUP"})}}}))(T),V=(a(99),function(e){var t=e.isLogged,a=e.logout;return Object(n.useEffect)((function(){!0===t&&(localStorage.removeItem("user"),a())}),[t,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{to:"/"}))}),U=Object(l.b)((function(e){return{isLogged:e.auth.isLogged}}),(function(e){return{logout:function(){e({type:"LOGOUT"})}}}))(V),F=(a(100),a(101),function(e){var t=e.type,a=e.name,n=e.placeholder,c=e.inputValue,o=e.setInputValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"field__input px-4 mb-2 h-12",id:a,type:t,name:a,placeholder:n,value:c,onChange:function(e){return o(e.target.value)}}))}),z=Object(l.b)((function(e,t){return{inputValue:e.user[t.name]}}),(function(e,t){return{setInputValue:function(a){e(function(e,t){return{type:"CHANGE_USER_INPUT",value:e,key:t}}(a,t.name))}}}))(F),P=function(){return r.a.createElement("li",{className:"stories__story mx-auto my-4 h-16 px-4 bg-gray-100 rounded-md flex justify-between items-center"},r.a.createElement("h2",{className:"stories__story-title overflow-auto h-12 py-3"},"Nom de l'histoire"),r.a.createElement("div",{className:"stories__story-options flex justify-around items-center w-48"},r.a.createElement("p",{className:"stories__story-status text-xs bg-green-500 h-8 px-1 py-2 rounded-md m-1 text-center"},"Publi\xe9e"),r.a.createElement("button",{className:"stories__story-edit bg-blue-400 rounded-full h-10 w-10 m-1"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("button",{className:"stories__story-delete bg-red-700 rounded-full h-10 w-10 m-1"},r.a.createElement("i",{className:"fas fa-trash-alt"}))))},M=(a(102),function(e){var t=e.showModalDelete,a=e.onClose,c=e.handleDeleteUser,o=e.connectedId,l=Object(n.useState)(!0),u=Object(s.a)(l,2),m=u[0],d=u[1],f=Object(n.useState)(!1),p=Object(s.a)(f,2),g=p[0],b=p[1],h=m?"bg-gray-600 cursor-not-allowed":"bg-green-500 cursor-pointer",E=!0===t?"block":"hidden",y=Object(n.useRef)(null);Object(n.useEffect)((function(){return document.addEventListener("click",x),document.addEventListener("keyup",_),function(){document.removeEventListener("click",x),document.removeEventListener("keyup",_)}}),[]);var x=function(e){y.current&&!y.current.contains(e.target)&&a()},_=function(e){"Escape"===e.code&&a()};return r.a.createElement("div",{className:"modal-delete h-screen w-screen ".concat(E," fixed z-40 flex flex-col justify-center")},r.a.createElement("div",{className:"w-3/4 mx-auto md:max-w-6xl relative bg-gray-200 opacity-100 rounded-lg",ref:y},r.a.createElement("button",{className:"modal-delete__close h-12 w-12 bg-red-500 text-white font-bold absolute rounded-full",type:"button",onClick:function(){return a()}},"X"),r.a.createElement("div",{className:"modal-delete__content p-3"},r.a.createElement("h1",{className:"modal-delete__title text-2xl font-bold text-center mb-2"},"ATTENTION !"),r.a.createElement("p",{className:"modal-delete__synopsis text-center mb-2"},"La suppression de votre compte entrainera \xe9galement la"," ",r.a.createElement("span",{className:"font-bold"}," ","suppression totale des histoires cr\xe9\xe9es depuis ce compte. ",r.a.createElement("br",null),"Il ne sera plus possible de les r\xe9cup\xe9rer."),r.a.createElement("br",null)),r.a.createElement("label",{className:"modal-delete__checkbox flex justify-center items-center my-4"},r.a.createElement("input",{type:"checkbox",name:"checkbox-confirm",onChange:function(){d(!m)},className:"mr-2"}),"J'ai bien compris"),r.a.createElement("div",{className:"modal-delete__buttons flex flex-col items-center"},r.a.createElement("button",{className:"modal-delete__agree w-8/12 sm:w-64 p-2 rounded-lg my-3 ".concat(h),disabled:m,onClick:function(){v.a.delete("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/account/".concat(o),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user"))}}).then((function(e){console.log(e),b(!0),c(),localStorage.removeItem("user")})).catch((function(e){console.log(e)}))}},"Supprimer mon compte"),r.a.createElement("button",{onClick:function(){return a()},className:"modal-delete__close w-8/12 sm:w-64 p-2 bg-red-500 rounded-lg my-3"},"Je ne souhaite pas supprimer mon compte")))),g&&r.a.createElement(i.a,{to:"/"}))}),D=(a(103),function(e){var t=e.showModalAvatar,a=e.onClose,c=e.setAvatar,o=!0===t?"block":"hidden",l=Object(n.useRef)(null);Object(n.useEffect)((function(){return document.addEventListener("click",s),document.addEventListener("keyup",i),function(){document.removeEventListener("click",s),document.removeEventListener("keyup",i)}}),[]);var s=function(e){l.current&&!l.current.contains(e.target)&&a()},i=function(e){"Escape"===e.code&&a()};return r.a.createElement("div",{className:"modal-avatar h-screen w-screen ".concat(o," fixed z-40 flex flex-col justify-center")},r.a.createElement("div",{className:"w-3/4 mx-auto md:max-w-6xl relative bg-gray-200 opacity-100 rounded-lg overflow-y-auto",ref:l},r.a.createElement("button",{className:"modal-avatar__close h-12 w-12 bg-red-500 text-white font-bold absolute rounded-full",type:"button",onClick:function(){return a()}},"X"),r.a.createElement("div",{className:"modal-avatar__content p-3"},r.a.createElement("h1",{className:"modal-avatar__title text-2xl font-bold text-center mb-2"},"Choix d'un avatar"),r.a.createElement("ul",{className:"modal-avatar__list flex flex-wrap"},r.a.createElement("li",{className:"modal-avatar__item-img w-1/2"},r.a.createElement("img",{src:"/assets/img/default_avatar.png",alt:"",className:"modal-avatar__img h-24 w-24 my-5 mx-auto cursor-pointer transform hover:scale-110",onClick:function(){c("default_avatar"),a()}})),r.a.createElement("li",{className:"modal-avatar__item-img w-1/2"},r.a.createElement("img",{src:"/assets/img/default_avatar2.png",alt:"",className:"modal-avatar__img h-24 w-24 my-5 mx-auto cursor-pointer transform hover:scale-110",onClick:function(){c("default_avatar2"),a()}}))))))}),B=Object(l.b)(null,(function(e){return{setAvatar:function(t){e(function(e){return{type:"SET_AVATAR",imgFile:e}}(t))}}}))(D),G=function(e){var t=e.connectedId,a=e.fetchUser,c=e.avatar,o=e.handleUserEdit,l=e.handleDeleteUser,u=e.name,m=e.mail,d=e.password,f=e.newPassword;Object(n.useEffect)(a,[]);var p=Object(i.h)().slug,g=Object(n.useState)(!1),b=Object(s.a)(g,2),h=b[0],E=b[1],y=Object(n.useState)(!1),x=Object(s.a)(y,2),v=x[0],_=x[1],w=function(e,t,a,n){var r={};return""===e?r.nameErrors=["Le nom d'utilisateur ne peut-\xeatre vide"]:e.length<2&&(r.nameErrors=["Le nom d'utilisateur doit contenir 2 caract\xe8res minimum"]),""===t&&(r.mailErrors=["L'email ne peut \xeatre vide"]),""!==n&&n.length<6&&(r.passwordCheckErrors=["Le nouveau mot de passe doit contenir 6 caract\xe8res minimum"]),""===a&&(r.passwordErrors=["Le mot de passe ne peut \xeatre vide"]),r}(u,m,d,f);return r.a.createElement("div",{className:"profile px-8 h-auto sm:px-16 sm:mt-10 sm:px-24 md:mx-auto md:mt-20"},h&&r.a.createElement(M,{showModalDelete:h,onClose:function(){return E(!1)},handleDeleteUser:l,connectedId:t}),v&&r.a.createElement(B,{showModalAvatar:v,onClose:function(){return _(!1)}}),r.a.createElement("section",{className:"profile__stories mt-4 border-b-4 pb-8"},r.a.createElement("h1",{className:"stories__title uppercase text-white text-3xl font-light"},"Mes histoires"),r.a.createElement("ul",{className:"stories__list mt-2"},r.a.createElement(P,null),r.a.createElement(P,null),r.a.createElement(P,null),r.a.createElement(P,null))),r.a.createElement("section",{className:"profile__user mt-10 md:flex justify-around"},r.a.createElement("div",{className:"profile__left-panel flex flex-col w-64 mx-auto md:mx-0 justify-center my-6 items-center md:mb-20"},r.a.createElement("img",{src:"/assets/img/".concat(c,".png"),alt:"",className:"profile__img w-40 h-40 md:w-56 md:h-56 "}),r.a.createElement("button",{onClick:function(){return _(!0)},className:"profile__button-img mt-4 p-4 bg-white rounded-lg font-bold"},"Choisir un avatar")),r.a.createElement("div",{className:"profile__right-panel md:w-6/12"},r.a.createElement("h1",{className:"stories__title uppercase text-white text-3xl font-light"},"Mes informations"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(w),0===Object.keys(w).length&&o()},className:"profile__form flex flex-col"},r.a.createElement("label",{className:"profile__label mt-2",htmlFor:"username"},"Nom d'utilisateur"),r.a.createElement(z,{type:"text",name:"username",placeholder:"Nom d'utilisateur"}),r.a.createElement("label",{className:"profile__label mt-2",htmlFor:"email"},"Email"),r.a.createElement(z,{type:"email",name:"email",placeholder:"Email"}),r.a.createElement("label",{className:"profile__label mt-2",htmlFor:"password"},"Mot de passe actuel"),r.a.createElement(z,{type:"password",name:"password",placeholder:"Mot de passe"}),r.a.createElement("label",{className:"profile__label mt-2",htmlFor:"password"},"Nouveau mot de passe"),r.a.createElement(z,{type:"password",name:"newPassword",placeholder:"Nouveau mot de passe"}),r.a.createElement("input",{className:"profile__submit cursor-pointer mt-4 py-4 bg-blue-400 rounded-md text-white font-bold",type:"submit",value:"\xc9diter mes informations"})),r.a.createElement("button",{onClick:function(){return E(!0)},className:"profile__delete-account w-full my-6 py-4 bg-red-600 rounded-md text-white font-bold"},"Supprimer mon compte"))),p!==t.toString()?r.a.createElement(i.a,{to:"/"}):"")},H=Object(l.b)((function(e){return{connectedId:e.auth.connectedId,avatar:e.user.avatar,name:e.user.username,mail:e.user.email,password:e.user.password,newPassword:e.user.newPassword}}),(function(e){return{fetchUser:function(){e({type:"FETCH_USER"})},handleUserEdit:function(){e({type:"USER_EDIT"})},handleDeleteUser:function(){e({type:"USER_DELETE"})}}}))(G),X=(a(104),function(e){var t=e.fetchStory,a=e.place,c=e.event,o=e.transitions,l=e.nextScene,u=Object(i.h)().slug;Object(n.useEffect)((function(){t(u)}),[t]);var m=Object(n.useState)("Lieu"),f=Object(s.a)(m,2),p=f[0],g=f[1],b=Object(n.useState)("\xc9venement"),h=Object(s.a)(b,2),E=h[0],y=h[1],x="Lieu"!==p&&"\xc9venement"!==E?"opacity-100":"opacity-0";return r.a.createElement("div",{className:"game-interface h-screen w-screen bg-gray-900 px-4 relative ".concat("Lieu"===p?"":"is-forest"),style:{backgroundImage:"Lieu"===p?"":'url("https://cdnb.artstation.com/p/assets/images/images/010/310/039/large/kasia-kosobucka-landscape-bg.jpg?1523743339")'}},r.a.createElement("div",{className:"game-interface__button absolute right-0 top-0"},r.a.createElement(d.b,{to:"/"},r.a.createElement("button",{className:"game-interface__leave mr-6 mt-6 focus:outline-none bg-red-700 w-12 h-12 ml-auto duration-150 transform easy-in-out hover:scale-105 rounded-full font-bold text-gray-300 flex justify-center items-center xl:mr-48 xl:mt-12"},r.a.createElement("i",{className:"fas fa-2x fa-times font-light"})))),r.a.createElement("div",{className:"game-interface__scene h-full overflow-x-auto pt-20 md:pt-10"},r.a.createElement("div",{className:"card__place-event mx-1 my-2 flex justify-center"},r.a.createElement("div",{onClick:function(){g("Lieu"===p?a.name:"Lieu")},className:"card__place mr-4 ".concat("Lieu"===p?"":"card__place--active bg-teal-500"," bg-gray-200 select-none duration-500 h-56 w-40 rounded-lg flex justify-center items-center transform hover:scale-105 cursor-pointer shadow-lg text-gray-800 text-2xl font-bold")},r.a.createElement("h1",{className:"card__title text-center mx-auto p-1 max-h-full overflow-y-auto ".concat("Lieu"===p?"":"card__title--active")},p)),r.a.createElement("div",{onClick:function(){return y("\xc9venement"===E?c.name:"\xc9venement")},className:"card__event ml-4 ".concat("\xc9venement"===E?"":"card__event--active bg-teal-500"," bg-gray-200 select-none duration-500 h-56 w-40 rounded-lg flex justify-center items-center transform hover:scale-105 cursor-pointer shadow-lg text-gray-800 text-2xl font-bold")},r.a.createElement("h1",{className:"card__title text-center mx-auto p-1 max-h-full ".concat("\xc9venement"===E?"":"card__title--active")},E))),r.a.createElement("div",{className:"game-interface__describe pt-10 sm:pt-20 transform duration-500 px-8 flex flex-col ".concat(x)},r.a.createElement("p",{className:"game-interface__content my-2 px-4 py-2 text-white font-bold text-lg sm:text-xl text-center bg-gray-800 bg-opacity-50 rounded-lg"},a.description," et ",c.description," ",r.a.createElement("br",null),"Que faites-vous ?"),r.a.createElement("div",{className:"game-interface__actions py-6 overflow-x-auto flex"},o.map((function(e,t){return r.a.createElement("div",{key:t,onClick:function(){return t=e.id,g("Lieu"),y("\xc9venement"),void setTimeout((function(){l(t)}),500);var t},className:"card__action my-2 mx-2 bg-gray-200 select-none px-4 h-48 w-40 rounded-lg flex justify-center items-center transform hover:scale-105 cursor-pointer shadow-lg text-gray-800 text-center text-lg font-bold sm:text-2xl sm:h-56 sm:w-48"},r.a.createElement("p",{className:"card__action-title overflow-y-auto"},e.action.name))}))))))}),q=function(e){return{type:"SET_SCENE",transitions:e.transitions,event:e.event,place:e.place}},J=Object(l.b)((function(e){return{place:e.gameinterface.place,event:e.gameinterface.event,transitions:e.gameinterface.transitions}}),(function(e){return{fetchStory:function(t){e(function(e){return{type:"FETCH_STORY",storyId:e}}(t))},nextScene:function(t){e(function(e){return{type:"NEXT_SCENE",nextSceneId:e}}(t))}}}))(X),W=(a(105),function(e){var t=e.title,a=e.datas,n=e.setSelectedRadioValue,c=e.selectedRadioValue,o=e.fetchFilterRequest;return r.a.createElement("div",{className:"filter"},r.a.createElement("h3",{className:"filter__title my-1"},t),r.a.createElement("ul",{className:"filter__list mx-2"},a.map((function(e){return r.a.createElement("li",{className:"filter__radio",key:e.id},r.a.createElement("label",{htmlFor:e.name,className:"my-2 cursor-pointer"},r.a.createElement("input",{type:"radio",name:e.name,id:e.name,value:e.name,onChange:function(){return a=e.id,r=t,n(a),void o(a,r);var a,r},checked:c===e.id,className:"cursor-pointer mx-2"}),e.name))}))))}),K=function(e){var t=e.sortStories,a=Object(n.useState)("name"),c=Object(s.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],d=u[1];return r.a.createElement("div",{className:"dropdown bg-gray-200 rounded-lg p-4 flex flex-col md:self-start"},r.a.createElement("div",{className:"dropdown__list flex items-center my-1"},r.a.createElement("label",{htmlFor:"dropdown",className:"dropdown__label"},"Afficher par:"),r.a.createElement("select",{name:"filter-by",id:"filter-by",className:"dropdown__select bg-transparent border rounded-sm border-black w-7/12 mx-auto py-1",value:o,onChange:function(e){l(e.target.value),t(e.target.value,m)}},r.a.createElement("option",{value:"name"},"Nom (d\xe9faut)"),r.a.createElement("option",{value:"date"},"Date de publication"),r.a.createElement("option",{value:"difficulty"},"Difficult\xe9"),r.a.createElement("option",{value:"category"},"Categorie"),r.a.createElement("option",{value:"rating"},"Populaire"))),r.a.createElement("div",{className:"dropdown__inverse flex items-center my-1"},r.a.createElement("label",{className:"dropdown__label pr-2",htmlFor:"checkbox-reverse"},"Inverser l'ordre"),r.a.createElement("input",{onChange:function(e){d(!m),t(o,!m)},type:"checkbox",name:"reverse",id:"reverse"})))},Y=[{id:1,name:"Facile"},{id:2,name:"Normal"},{id:3,name:"Difficile"}],Q=a(8),$=function(e){v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/stories").then((function(t){e(t.data)})).catch((function(e){console.log("error")}))},Z=(a(106),function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),l=Object(s.a)(o,2),i=l[0],u=l[1],m=Object(n.useState)([]),d=Object(s.a)(m,2),f=d[0],p=d[1],g=Object(n.useState)(!0),b=Object(s.a)(g,2),E=b[0],y=b[1],x=Object(n.useState)(0),_=Object(s.a)(x,2),w=_[0],O=_[1],S=Object(n.useState)(!1),I=Object(s.a)(S,2),C=I[0],L=I[1],k=C?"opacity-100 gamelist__filter--active":"opacity-0",A=Object(n.useState)(!1),T=Object(s.a)(A,2),R=T[0],V=T[1],U=Object(n.useState)(null),F=Object(s.a)(U,2),z=F[0],P=F[1],M=function(e){P(e),V(!0)},D=function(e,t){!function(e,t,a){if(0===t)return $(e);"Cat\xe9gories"===a&&v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/stories?story_category=".concat(t)).then((function(t){e(t.data)})).catch((function(e){console.log(e)})),"Difficult\xe9s"===a&&v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/stories?story_difficulty=".concat(t)).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}(p,e,t)};return Object(n.useEffect)((function(){!function(e){v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/story_categories").then((function(t){e(t.data)})).catch((function(e){console.log("error")}))}(c),$(p)}),[]),Object(n.useEffect)((function(){a.length>0&&u(!1)}),[a]),Object(n.useEffect)((function(){f.length>0&&y(!1)}),[f]),r.a.createElement("div",{className:"gamelist mt-4 mx-8 h-auto md:mt-32 lg:w-8/12 lg:flex lg:flex-col lg:mx-auto"},R&&r.a.createElement(j,{showModal:R,onClose:function(){return V(!1)},storyId:z}),r.a.createElement("h1",{className:"gamelist__title uppercase text-white text-2xl font-light text-center my-2 md:text-4xl md:text-left lg:self-start"},"S\xe9lectionner un sc\xe9nario"),r.a.createElement("button",{name:"button-display-filter",onClick:function(){return L(!C)},className:"gamelist__button bg-gray-200 py-2 w-full rounded-lg text-xl my-1 shadow-lg md:hidden"},"Voir les filtres"),r.a.createElement("div",{className:"gamelist__container md:flex md:my-4 lg:justify-between"},r.a.createElement("aside",{className:"gamelist__filter overflow-hidden ".concat(k," bg-gray-200 px-6 rounded-lg md:opacity-100 md:mr-6 md:w-48 md:px-2")},r.a.createElement("h2",{className:"gamelist__filter-title text-xl font-bold my-2 px-6 md:text-center md:px-0"},"Affiner les histoire"),r.a.createElement("div",{className:"gamelist__filter-button flex justify-center my-2"},r.a.createElement("button",{onClick:function(){0!==w&&(O(0),$(p))},className:"gamelist__filter-reset bg-blue-200 rounded-lg px-4 py-2 border border-black shadow-lg text-sm"},"R\xe9initialiser les filtres")),r.a.createElement("div",{className:"filter__blog flex justify-around mb-4 md:flex-col md:items-center"},i&&r.a.createElement(N,{type:"Oval",color:"#5BC1FF",heightValue:50,widthValue:50}),!i&&r.a.createElement(W,{title:"Cat\xe9gories",datas:a,setSelectedRadioValue:O,selectedRadioValue:w,fetchFilterRequest:D}),!i&&r.a.createElement(W,{title:"Difficult\xe9s",datas:Y,setSelectedRadioValue:O,selectedRadioValue:w,fetchFilterRequest:D}))),r.a.createElement("section",{className:"gameList__display my-4 md:my-0 md:flex md:justify-center md:w-10/12"},r.a.createElement("div",{className:"gameList__display-container md:flex md:flex-col md:items-center"},r.a.createElement(K,{sortStories:function(e,t){!function(e,t,a,n){var r=Object(Q.a)(e);switch(a){case"name":t(r.sort((function(e,t){return n?t.title.localeCompare(e.title):e.title.localeCompare(t.title)})));break;case"category":t(r.sort((function(e,t){return n?t.category.name.localeCompare(e.category.name):e.category.name.localeCompare(t.category.name)})));break;case"difficulty":t(r.sort((function(e,t){return n?t.difficulty-e.difficulty:e.difficulty-t.difficulty})));break;case"rating":t(r.sort((function(e,t){return n?t.rating-e.rating:e.rating-t.rating})));break;case"date":t(r.sort((function(e,t){return n?t.publishedAt.localeCompare(e.publishedAt):e.publishedAt.localeCompare(t.publishedAt)})))}}(f,p,e,t)}}),E?r.a.createElement("div",{className:"home__loading-latest flex justify-center mt-4"},r.a.createElement(N,{type:"Bars",color:"#5BC1FF",heightValue:50,widthValue:50})):r.a.createElement("ul",{className:"gamelist__list mt-8"},f.map((function(e){return r.a.createElement(h,Object.assign({key:e.id},e,{handleModal:M}))})))))))}),ee=(a(35),a(7)),te=function(){var e=Object(n.useState)({loading:!1,repos:null}),t=Object(s.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)({event:[]}),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)({lieux:[]}),m=Object(s.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)({transitions:[]}),g=Object(s.a)(p,2),b=g[0],h=g[1],E=Object(n.useState)({categories:[]}),y=Object(s.a)(E,2),x=y[0],_=y[1];Object(n.useEffect)((function(){var e=localStorage.getItem("user");a({loading:!0}),v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/events",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){console.log(e.data),i({event:e.data})})),v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/places",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){f({lieux:e.data})})),v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/actions",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){h({transitions:e.data})})),v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/story_categories",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){_({categories:e.data})}))}),[a]);var w=Object(n.useState)({story_id:null}),N=Object(s.a)(w,2),j=N[0],O=N[1];Object(n.useEffect)((function(){var e=localStorage.getItem("user");v.a.patch("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/stories/"+j.story_id+"/publish",{title:F.title,category:T.category,difficulty:C.difficulty,synopsis:D.synopsis,scenes:Object(Q.a)(he.scenes)},{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){console.log("PUT :"),console.log(e)})).catch((function(e){console.log(e.response)}))}),[j]);var S=Object(n.useState)({difficulty:1}),I=Object(s.a)(S,2),C=I[0],L=I[1],k=Object(n.useState)({category:22}),A=Object(s.a)(k,2),T=A[0],R=A[1],V=Object(n.useState)({title:"Titre"}),U=Object(s.a)(V,2),F=U[0],z=U[1],P=Object(n.useState)({synopsis:"Synopsis"}),M=Object(s.a)(P,2),D=M[0],B=M[1],G=Object(n.useState)({currentLieu:"LIEU",currentLieuId:0,bgImage:""}),H=Object(s.a)(G,2),X=H[0],q=H[1],J=Object(n.useState)({currentActionIsSelected:!1}),W=Object(s.a)(J,2),K=W[0],Y=W[1],$=Object(n.useState)({currentEvent:"EVENEMENT",currentEventId:0,bgImage:"",isEnd:!1}),Z=Object(s.a)($,2),te=Z[0],ae=Z[1],ne=Object(n.useState)({currentAction:"ACTION",array:[],bgImage:""}),re=Object(s.a)(ne,2),ce=re[0],oe=re[1],le=Object(n.useState)({nextSceneRef:0}),se=Object(s.a)(le,2),ie=se[0],ue=se[1],me=Object(n.useState)({currentCards:"lieuState",bgImage:""}),de=Object(s.a)(me,2),fe=de[0],pe=de[1],ge=Object(n.useState)({scenes:[]}),be=Object(s.a)(ge,2),he=be[0],Ee=be[1],ye=Object(n.useState)({id:0}),xe=Object(s.a)(ye,2),ve=xe[0],_e=xe[1],we=Object(n.useState)({array:[""]}),Ne=Object(s.a)(we,2),je=Ne[0],Oe=Ne[1],Se=Object(n.useState)({currentSceneIndex:0,currentActionIndex:0}),Ie=Object(s.a)(Se,2),Ce=Ie[0],Le=Ie[1],ke=Object(n.useState)({actionIndex:0}),Ae=Object(s.a)(ke,2),Te=(Ae[0],Ae[1],function(){pe({currentCards:"actionState"})});Object(n.useEffect)((function(){q({currentLieu:"LIEU",currentLieuId:0,bgImage:""}),ae({currentEvent:"EVENEMENT",currentEventId:0,bgImage:"",isEnd:!1}),oe({currentAction:"ACTION",array:[],bgImage:""})}),[he]);var Re=Object(n.useState)({showModal:!1}),Ve=Object(s.a)(Re,2),Ue=Ve[0],Fe=Ve[1],ze=function(e){Fe({showModal:e})};return r.a.createElement("div",{className:"Nav bg-gray-900 flex  flex-col justify-evenly items-center mt-32 "},r.a.createElement("div",{className:Ue.showModal?"absolute h-screen flex justify-center items-center z-50 top-0":"hidden"},r.a.createElement("div",{className:"z-50 bg-white flex flex-col justify-center items-center text-gray-900 text-center rounded-lg shadow-lg p-16"},r.a.createElement("h2",{className:"text-3xl "},"Titre de votre histoire : "),r.a.createElement("input",{onChange:function(e){z({title:e.target.value})},placeholder:"Votre titre",className:"px-4 py-2 shadow-inner w-64 focus:border-2 focus:border-gray-700"}),r.a.createElement("h2",{className:"text-3xl "},"Synopsis : "),r.a.createElement("textarea",{onChange:function(e){B({synopsis:e.target.value})},placeholder:"Votre titre",className:"px-4 py-2 shadow-inner w-64"}),r.a.createElement("select",{onChange:function(e){L({difficulty:e.target.value})},name:"difficulty",id:"difficulty"},r.a.createElement("option",{value:"1"},"Facile"),r.a.createElement("option",{value:"2"},"Moyen"),r.a.createElement("option",{value:"3"},"Difficile"))," ",r.a.createElement("select",{onChange:function(e){R({category:e.target.value})},name:"categories",id:"category"},x.categories.length>0?x.categories.map((function(e,t){return r.a.createElement("option",{value:e.id},e.name)})):""),r.a.createElement("button",{className:"bg-teal-500 ease-in duration-100 transform my-6 font-bold uppercase shadow-lg text-center px-4 py-2 text-2xl w-64 text-white rounded-lg hover:scale-105",onClick:function(){var e=localStorage.getItem("user");console.log(he.scenes),null===j.story_id&&v.a.post("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/stories",{title:F.title,category:T.category,difficulty:C.difficulty,synopsis:D.synopsis,scenes:Object(Q.a)(he.scenes)},{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){console.log("POST :"),console.log(e),O({story_id:e.data.story_id})})).catch((function(e){console.log(e.response)}))}},"Publier"),r.a.createElement("button",{className:"bg-red-500 ease-in duration-100 transform  font-bold uppercase shadow-lg text-center px-4 py-2 text-2xl w-64 text-white rounded-lg hover:scale-105",onClick:function(){return ze(!1)}},"annuler")),r.a.createElement("div",{className:"absolute  w-screen h-screen opacity-50 bg-white z-30"})),r.a.createElement("div",{className:"flex flex-col w-screen"},r.a.createElement("div",{className:"flex    "},he.scenes.length>0?he.scenes.map((function(e,t){return r.a.createElement("div",{className:"select-none bg-cover mx-8 my-4 w-64  py-4 rounded-lg bg-gray-200  flex flex-col justify-between  border-gray-500 items-center text-gray-100 shadow-lg font-bold text-lg",style:{backgroundImage:"url(".concat(e.lieu.lieuBg,")")}},r.a.createElement("div",{onClick:function(){return function(e,t){var a=Object(Q.a)(he.scenes);console.log(a),a[Ce.currentSceneIndex].transitions[Ce.currentActionIndex].nextSceneRef=e,Ee({scenes:a}),Oe({array:[].concat(Object(Q.a)(je.array),[ie.nextSceneRef])}),Y({currentActionIsSelected:!1})}(e.reference)},className:"flex border-2 border-gray-200  h-16 w-16 justify-center items-center rounded-full bg-gray-900 -mt-10 shadow-lg "},e.reference),r.a.createElement("div",null,r.a.createElement("div",{className:"text-2xl"},e.lieu.lieuName),r.a.createElement("div",{className:"text-2xl"},e.evenement.evenementName)),r.a.createElement("div",{className:""},e.transitions.map((function(a,n){return r.a.createElement("div",{onClick:function(){return je.array.includes(a.nextSceneRef)?"":function(e,t,a){console.log("currentSceneIndex : ".concat(t," - currentActionIndex : ").concat(a," ")),ue({nextSceneRef:e.nextSceneRef}),Le({currentSceneIndex:t,currentActionIndex:a}),Y({currentActionIsSelected:!0})}(je.array.includes(e.nextSceneRef)?"":a,t,n)},className:je.array.includes(a.nextSceneRef)?"py-2 select-none my-4 rounded-lg px-4 bg-teal-500 shadow-md text-white font-bold":a.nextSceneRef===ie.nextSceneRef?"py-2 select-none my-4 rounded-lg px-4 bg-blue-600 shadow-md text-white font-bold transform duration-100 ease-in-out hover:scale-95":"py-2 select-none my-4 rounded-lg px-4 bg-gray-900 shadow-md text-white font-bold transform duration-100 ease-in-out hover:scale-95"},r.a.createElement("div",{className:"flex flex-wrap justify-evenly"},a.actionName,"  ",je.array.includes(a.nextSceneRef)?r.a.createElement("div",{className:"mx-2"}," ",r.a.createElement("i",{className:"fas fa-arrow-right"}," ",a.nextSceneRef)):""))}))))})):""),r.a.createElement("div",{className:"flex justify-center items-center"},r.a.createElement("div",{onClick:function(){pe({currentCards:"lieuState"})},className:"LIEU"===X.currentLieu?"select-none bg-cover my-4 w-48 h-48 rounded-lg bg-gray-200 mx-8 flex justify-center border-4 border-dashed border-gray-500 items-center text-gray-500 font-bold text-2xl":"select-none bg-cover my-4 w-48 h-48 rounded-lg bg-gray-200 mx-8 flex justify-center  border-gray-500 items-center text-gray-100 shadow-lg font-bold text-2xl",style:{backgroundImage:X.bgImage?"url(".concat(X.bgImage,")"):""}},X.currentLieu),r.a.createElement("div",{onClick:function(){pe({currentCards:"evenementState"})},className:"EVENEMENT"===te.currentEvent?"select-none bg-cover my-4 w-48 h-48 rounded-lg bg-gray-200 mx-8 flex justify-center border-4 border-dashed border-gray-500 items-center text-gray-500 font-bold text-2xl":"select-none bg-cover my-4 w-48 h-48 rounded-lg bg-gray-200 mx-8 flex justify-center  border-gray-500 items-center text-gray-100 shadow-lg font-bold text-2xl",style:{backgroundImage:te.bgImage?"url(".concat(te.bgImage,")"):""}},te.currentEvent),0==ce.array?r.a.createElement("div",{onClick:Te,className:"ACTION"===ce.currentAction?"select-none my-4 w-48 h-48 rounded-lg bg-gray-200 mx-8 flex justify-center border-4 border-dashed border-gray-500 items-center text-gray-500 font-bold text-2xl":"select-none my-4 w-48 h-48 rounded-lg bg-gray-700 mx-8 flex justify-center shadow-lg items-center text-gray-100 font-bold text-2xl"},ce.currentAction):ce.array.map((function(e,t){return r.a.createElement("div",{key:t,onClick:Te,className:"ACTION"===ce.currentAction?"select-none my-4 w-48 h-48 rounded-lg bg-gray-200 mx-8 flex justify-center border-4 border-dashed border-gray-500 items-center text-gray-500 font-bold text-2xl":"select-none my-4 w-48 h-48 rounded-lg bg-gray-700 mx-8 flex justify-center shadow-lg items-center text-gray-100 font-bold text-2xl"},r.a.createElement("div",{className:"flex flex-col"},e.actionName,r.a.createElement("span",{onClick:function(){return function(e){var t=ce.array.slice(0);t.splice(e,1),1!=ce.array.length?oe(Object(ee.a)({},ce,{array:t})):oe({currentAction:"ACTION",array:[],bgImage:""})}(t)},className:"py-4"},"X")))})))),r.a.createElement("button",{className:"bg-teal-500 ease-in duration-100 transform my-6 font-bold uppercase shadow-lg text-center px-4 py-2 text-2xl w-64 text-white rounded-lg hover:scale-105",onClick:function(){return ze(!0)}},"Publier"),"LIEU"!=X.currentLieu&&"EVENEMENT"!=te.currentEvent&&"ACTION"!=ce.currentAction&&(K.currentActionIsSelected||he.scenes.length<1)?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){if("LIEU"!=X.currentLieu&&"EVENEMENT"!=te.currentEvent&&"ACTION"!=ce.currentAction&&he.scenes.length<1)Ee({scenes:[].concat(Object(Q.a)(he.scenes),[{reference:0,place:X.currentLieuId,event:te.currentEventId,isEnd:te.isEnd,lieu:{lieuID:X.currentLieuId,lieuName:X.currentLieu,lieuBg:X.bgImage},evenement:{evenementID:te.currentEventId,evenementName:te.currentEvent},transitions:Object(Q.a)(ce.array)}])});else{if("LIEU"==X.currentLieu||"EVENEMENT"==te.currentEvent||"ACTION"==ce.currentAction)return;Ee({scenes:[].concat(Object(Q.a)(he.scenes),[{reference:ie.nextSceneRef,place:X.currentLieuId,event:te.currentEventId,isEnd:te.isEnd,lieu:{lieuID:X.currentLieuId,lieuName:X.currentLieu,lieuBg:X.bgImage},evenement:{evenementID:te.currentEventId,evenementName:te.currentEvent},transitions:Object(Q.a)(ce.array)}])}),Oe({array:[].concat(Object(Q.a)(je.array),[ie.nextSceneRef])}),Y({currentActionIsSelected:!1})}},className:"text-white text-lg py-2 px-4 bg-gray-700 shadow-lg rounded-md"},"Ajouter une nouvelle sc\xe8ne")):te.isEnd?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){if("LIEU"!=X.currentLieu&&"EVENEMENT"!=te.currentEvent&&he.scenes.length<1)Ee({scenes:[].concat(Object(Q.a)(he.scenes),[{reference:0,place:X.currentLieuId,event:te.currentEventId,lieu:{lieuID:X.currentLieuId,lieuName:X.currentLieu,lieuBg:X.bgImage},evenement:{evenementID:te.currentEventId,evenementName:te.currentEvent},transitions:[]}])});else{if("LIEU"==X.currentLieu||"EVENEMENT"==te.currentEvent)return;Ee({scenes:[].concat(Object(Q.a)(he.scenes),[{reference:ie.nextSceneRef,place:X.currentLieuId,event:te.currentEventId,lieu:{lieuID:X.currentLieuId,lieuName:X.currentLieu,lieuBg:X.bgImage},evenement:{evenementID:te.currentEventId,evenementName:te.currentEvent},transitions:[]}])}),Oe({array:[].concat(Object(Q.a)(je.array),[ie.nextSceneRef])}),Y({currentActionIsSelected:!1})}},className:"text-white text-lg py-2 px-4 bg-gray-700 shadow-lg rounded-md"},"Ajouter une nouvelle sc\xe8ne")):"",r.a.createElement("div",{className:" my-16 flex overflow-x-auto w-screen"},"lieuState"===fe.currentCards?d.lieux.map((function(e,t){return r.a.createElement("div",{key:t,onClick:function(){var t;q({currentLieu:(t=e).name,bgImage:t.image,currentLieuId:t.id})},className:"select-none  text-gray-200 w-48 h-64 rounded-lg bg-gray-800 m-8 flex justify-center items-center text-white font-bold text-2xl transform  duration-200 ease-in-out hover:-translate-y-2",style:{backgroundImage:"url(".concat(e.image,")")}},r.a.createElement("div",{className:"flex flex-col justify-center items-center text-center w-48 h-64"},r.a.createElement("p",null," ",e.name," "),r.a.createElement("p",{className:"text-lg font-normal w-full"},e.description)))})):"","evenementState"===fe.currentCards?l.event.map((function(e,t){return r.a.createElement("div",{key:t,onClick:function(){var t;ae({currentEvent:(t=e).name,bgImage:t.image,currentEventId:t.id,isEnd:t.isEnd})},className:"select-none bg-cover text-gray-200 w-48 h-64 px-8 rounded-lg bg-gray-800 m-8 flex justify-center items-center text-white font-bold text-2xl transform  duration-200 ease-in-out hover:-translate-y-2",style:{backgroundImage:"url(".concat(e.pictureFile,")")}},r.a.createElement("div",{className:"flex flex-col justify-center items-center text-center w-48 h-64  "},r.a.createElement("p",null," ",e.name," "),r.a.createElement("p",{className:"text-lg font-normal "},e.description)))})):"","actionState"===fe.currentCards?b.transitions.map((function(e,t){return r.a.createElement("div",{key:t,onClick:function(){return oe({currentAction:(t=e).name,array:[].concat(Object(Q.a)(ce.array),[{actionName:t.name,action:t.id,nextSceneRef:ve.id+1}])}),void _e({id:ve.id+1});var t},className:"select-none  text-gray-200 w-48 h-64 rounded-lg bg-gray-800 m-8 flex justify-center items-center text-white font-bold text-2xl transform  duration-200 ease-in-out hover:-translate-y-2"},r.a.createElement("div",{className:"flex flex-col justify-center items-center text-center w-48 h-64  "},r.a.createElement("p",null," ",e.name," "),r.a.createElement("p",{className:"text-lg font-normal "},e.description)))})):""))},ae=function(){return r.a.createElement("div",{className:"Create flex flex-col justify-between items-center bg-gray-900 h-full w-screen "},r.a.createElement(te,null))},ne=function(e){var t=e.checkIsLogged,a=e.isLogged,c=Object(i.g)().pathname,o=Object(n.useState)(!0),l=Object(s.a)(o,2),u=l[0],d=l[1],f=m.a.startsWith(c,"/letsplay");return Object(n.useEffect)((function(){d(!f),t()}),[t,f]),r.a.createElement("div",{className:"app bg-center bg-cover h-screen w-full overflow-auto"},u&&r.a.createElement(b,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",component:S,exact:!0}),r.a.createElement(i.b,{path:"/login",component:A}),r.a.createElement(i.b,{path:"/signup",component:R}),r.a.createElement(i.b,{path:"/gamelist",component:Z}),a&&r.a.createElement(i.b,{path:"/create",component:ae}),a&&r.a.createElement(i.b,{path:"/logout",component:U}),a&&r.a.createElement(i.b,{path:"/profile/:slug",component:H}),a&&r.a.createElement(i.b,{path:"/letsplay/:slug",component:J}),r.a.createElement(i.a,{to:"/login"})))},re=Object(l.b)((function(e){return{isLogged:e.auth.isLogged,connectedId:e.auth.connectedId,showNav:e.gameinterface.showNav}}),(function(e){return{checkIsLogged:function(){e({type:"CHECK_IS_LOGGED"})}}}))(ne),ce=a(12),oe={listPopular:[],listLatest:[]},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_POPULAR_STORIES":return Object(ee.a)({},e,{listPopular:t.popularStories});case"SAVE_LATEST_STORIES":return Object(ee.a)({},e,{listLatest:t.latestStories});default:return e}},se=a(13),ie={username:"",email:"",password:"",passwordCheck:"",isLogged:!1,connectedId:0},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHANGE_INPUT":return Object(ee.a)({},e,Object(se.a)({},t.key,t.value));case"CLEAR_INPUT":return Object(ee.a)({},e,Object(se.a)({},t.key,""));case"SAVE_USER":return Object(ee.a)({},e,{username:t.username,password:"",connectedId:t.id,isLogged:!0});case"SAVE_NEW_USER":return Object(ee.a)({},e,{username:"",email:"",password:"",passwordCheck:""});case"LOGOUT":return Object(ee.a)({},e,{username:"",isLogged:!1});case"USER_DELETE":return Object(ee.a)({},e,{isLogged:!1,connectedId:0});default:return e}},me={avatar:"default_avatar",username:"",email:"",password:"",newPassword:""},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHANGE_USER_INPUT":return Object(ee.a)({},e,Object(se.a)({},t.key,t.value));case"SET_AVATAR":return Object(ee.a)({},e,{avatar:t.imgFile});case"SET_USER":return Object(ee.a)({},e,{username:t.name,email:t.mail,avatar:"default_avatar",password:"",newPassword:""});case"CLEAR_EDIT":return Object(ee.a)({},e,{password:""});default:return e}},fe={transitions:[],place:{},event:{}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_SCENE":return Object(ee.a)({},e,{transitions:t.transitions,place:t.place,event:t.event});default:return e}},ge=Object(ce.c)({home:le,auth:ue,user:de,gameinterface:pe}),be=function(e){return function(t){return function(a){switch(a.type){case"FETCH_POPULAR_STORIES":v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/stories/top_five").then((function(t){e.dispatch({type:"SAVE_POPULAR_STORIES",popularStories:t.data})})).catch((function(e){console.log(e)}));break;case"FETCH_LATEST_STORIES":v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/stories/latest_five").then((function(t){e.dispatch({type:"SAVE_LATEST_STORIES",latestStories:t.data})})).catch((function(e){console.log(e)}));break;default:t(a)}}}},he=a(25),Ee=function(e){return function(t){return function(a){var n=e.getState();switch(a.type){case"LOGIN":v.a.post("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/login_check",{username:n.auth.username.trim(),password:n.auth.password.trim()}).then((function(t){console.log(t.data),200===t.status&&(localStorage.setItem("user",t.data.token),e.dispatch(C(Object(he.a)(localStorage.getItem("user")))))})).catch((function(e){console.log(e)}));break;case"CHECK_IS_LOGGED":null!==localStorage.getItem("user")&&e.dispatch(C(Object(he.a)(localStorage.getItem("user"))));break;case"SIGNUP":v.a.post("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/register",{name:n.auth.username.toLowerCase().trim(),mail:n.auth.email.toLowerCase().trim(),password:n.auth.password.trim()}).then((function(t){console.log(t),e.dispatch({type:"SAVE_NEW_USER"})})).catch((function(e){console.log(e)}));break;default:t(a)}}}},ye=function(e){return function(t){return function(a){var n=e.getState();switch(a.type){case"FETCH_USER":v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/app_users/".concat(n.auth.connectedId),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user"))}}).then((function(t){var a;console.log(t.data),e.dispatch({type:"SET_USER",name:(a=t.data).name,mail:a.mail,avatar:a.avatar})})).catch((function(e){console.log(e)}));break;case"USER_EDIT":v.a.put("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/account/".concat(n.auth.connectedId),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user"))},newName:n.user.username.toLowerCase().trim(),newMail:n.user.email.toLowerCase().trim(),oldPassword:n.user.password.trim(),newPassword:n.user.newPassword.trim()}).then((function(t){e.dispatch({type:"CLEAR_EDIT"})})).catch((function(e){console.log(e)}));break;default:t(a)}}}},xe=function(e){return function(t){return function(a){e.getState();switch(a.type){case"FETCH_STORY":v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/public/stories/".concat(a.storyId)).then((function(t){console.log(t.data.firstScene),e.dispatch(q(t.data.firstScene))})).catch((function(e){console.log(e)}));break;case"NEXT_SCENE":v.a.get("http://ec2-18-234-186-84.compute-1.amazonaws.com/api/transitions/".concat(a.nextSceneId,"/next_scene"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user"))}}).then((function(t){console.log(t),e.dispatch(q(t.data))})).catch((function(e){console.log(e)}));default:t(a)}}}},ve=function(e){return function(t){return function(a){console.log(e.getState()),console.log("Je laisse passer cette action: ",a),t(a)}}},_e=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.d)(Object(ce.a)(ve,be,Ee,ye,xe)),we=Object(ce.e)(ge,_e);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:we},r.a.createElement(d.a,null,r.a.createElement(re,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},35:function(e,t,a){},39:function(e,t,a){e.exports=a(107)},44:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[39,1,2]]]);
//# sourceMappingURL=main.5c9e55d0.chunk.js.map